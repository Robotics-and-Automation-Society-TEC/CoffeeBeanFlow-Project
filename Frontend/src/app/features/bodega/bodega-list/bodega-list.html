<div class="bodega-list-container">
  <a routerLink="/" class="btn-home">
    ğŸ  Volver a Inicio
  </a>
  
  <div class="list-header">
    <div class="header-content">
      <h1>ğŸª Registros de Bodega</h1>
      <p class="subtitle">GestiÃ³n de almacenamiento de cafÃ© procesado</p>
    </div>
    <button class="btn-primary" routerLink="/bodega/nuevo">
      + Nueva Bodega
    </button>
  </div>

  @if (errorMessage) {
    <div class="alert alert-error">{{ errorMessage }}</div>
  }

  @if (isLoading) {
    <div class="loading-container">
      <div class="loading-spinner"></div>
      <p>Cargando registros...</p>
    </div>
  }

  @if (!isLoading && bodegas.length === 0) {
    <div class="empty-state">
      <div class="empty-icon">ğŸª</div>
      <h2>No hay registros de bodega</h2>
      <p>Comienza creando un nuevo registro de almacenamiento</p>
      <button class="btn-primary" routerLink="/bodega/nuevo">
        Crear Primera Bodega
      </button>
    </div>
  }

  @if (!isLoading && bodegas.length > 0) {
    <div class="cards-container">
      @for (bodega of bodegas; track bodega.idBodega) {
        <div class="bodega-card">
          <div class="card-header">
            <div class="card-title">
              <span class="id-badge">ID: {{ bodega.idBodega }}</span>
              <span class="lote-badge">{{ bodega.nlote }}</span>
            </div>
            <div class="card-actions">
              <button 
                class="btn-action btn-edit" 
                (click)="editarRegistro(bodega.idBodega)"
                title="Editar"
              >
                âœï¸ Editar
              </button>
              <button 
                class="btn-action btn-delete" 
                (click)="eliminarRegistro(bodega.idBodega)"
                title="Eliminar"
              >
                ğŸ—‘ï¸ Eliminar
              </button>
            </div>
          </div>

          <div class="card-body">
            <!-- PESOS -->
            <div class="info-section">
              <h3 class="section-title">âš–ï¸ Pesos</h3>
              <table class="info-table">
                <tr>
                  <td class="label-cell">Bellota:</td>
                  <td class="value-cell">{{ formatearNumero(bodega.wBellota) }} kg</td>
                </tr>
                <tr>
                  <td class="label-cell">Pergamino:</td>
                  <td class="value-cell">{{ formatearNumero(bodega.wPergamino) }} kg</td>
                </tr>
              </table>
            </div>

            <!-- HUMEDADES -->
            <div class="info-section">
              <h3 class="section-title">ğŸ’§ Humedades</h3>
              <table class="info-table">
                <tr>
                  <td class="label-cell">Inicial:</td>
                  <td class="value-cell">{{ formatearNumero(bodega.hinicial) }}%</td>
                </tr>
                <tr>
                  <td class="label-cell">Final:</td>
                  <td class="value-cell">
                    {{ formatearNumero(bodega.hfinal) }}%
                    <span class="badge" [ngClass]="getClaseEstadoHumedad(bodega)">
                      {{ getEstadoHumedad(bodega) }}
                    </span>
                  </td>
                </tr>
              </table>
            </div>

            <!-- DENSIDADES -->
            <div class="info-section">
              <h3 class="section-title">ğŸ“Š Densidades</h3>
              <table class="info-table">
                <tr>
                  <td class="label-cell">Pergamino:</td>
                  <td class="value-cell">{{ formatearNumero(bodega.dPergamino) }} g/ml</td>
                </tr>
                <tr>
                  <td class="label-cell">Bellota:</td>
                  <td class="value-cell">{{ formatearNumero(bodega.dBellota) }} g/ml</td>
                </tr>
              </table>
            </div>

            <!-- INFORMACIÃ“N ADICIONAL -->
            <div class="info-section">
              <h3 class="section-title">ğŸ“‹ InformaciÃ³n Adicional</h3>
              <table class="info-table">
                <tr>
                  <td class="label-cell">Sacos:</td>
                  <td class="value-cell">{{ bodega.cantidadSacos ?? '-' }}</td>
                </tr>
                <tr>
                  <td class="label-cell">Inicio Reposo:</td>
                  <td class="value-cell">{{ formatearFecha(bodega.finicioReposo) }}</td>
                </tr>
              </table>
            </div>

            <!-- PRUEBAS DE MASA -->
            <div class="info-section">
              <h3 class="section-title">ğŸ”¬ Pruebas de Masa</h3>
              <table class="info-table">
                <tr>
                  <td class="label-cell">PMH Relativa:</td>
                  <td class="value-cell">{{ formatearNumero(bodega.pmhRelativa) }}</td>
                </tr>
                <tr>
                  <td class="label-cell">PMT Interna:</td>
                  <td class="value-cell">{{ formatearNumero(bodega.pmtInterna) }}Â°C</td>
                </tr>
                <tr>
                  <td class="label-cell">PMT Externa:</td>
                  <td class="value-cell">{{ formatearNumero(bodega.pmtExterna) }}Â°C</td>
                </tr>
              </table>
            </div>
          </div>
        </div>
      }
    </div>

    <div class="list-footer">
      <p>Total de registros: <strong>{{ bodegas.length }}</strong></p>
    </div>
  }
</div>
